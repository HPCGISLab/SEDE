<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">

<title>SEDE - Socio-Environmental Data Explorer</title>

<!-- Bootstrap core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="css/dashboard.css" rel="stylesheet">

<!-- custom style for SEDE -->
<link href="css/sede.css" rel="stylesheet">

<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
<script src="js/ie-emulation-modes-warning.js"></script>
<script
	src="http://maps.google.com/maps/api/js?sensor=true&libraries=visualization"></script>
<script charset="utf-8" src="js/d3.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="js/noUiSlider/nouislider.min.css">
<script src="js/jquery/jquery.js"></script>
<script src="js/noUiSlider/nouislider.min.js"></script>
<script src="js/moment.js"></script>
<script src="js/hexbin.js"></script>
<script src="states.json"></script>
<!--  script src="js/counties.json"></script>-->
<style>
svg {
	position: absolute;
}

.hexagons path {
	stroke: #fff;
}

.county path {
	stroke-width: 1.0;
	stroke: black;
}

.redfill {
	fill: red;
}
</style>
<script type="text/javascript">
	var gmap, slider, sliderstartend = [], sliderinterval, sedeserviceendpoint = "http://geostor.geog.kent.edu:8080/SEDE/SEDEServlet", mapviewportbounds, geocoder = new google.maps.Geocoder(), mapresponsejson, pointdata, hexmapdata, countiesdata, topwordsdata, overlay, projection, layer, hexbins, worldmapbounds, datareceived = false, searchwordset, searchcoordinates,sqlquery;
	/*Get data from database based on url and parameter value*/
	function getdatafromserver(url, params) {
		var http = new XMLHttpRequest();
		http.open("POST", url, false);
		http.setRequestHeader("Content-type",
				"application/x-www-form-urlencoded");
		http.send(params);
		return JSON.parse(http.responseText);
	}

	function getmapdata() {
		var action = "action=getpointhexdata";
		var interval = "interval=" + d3.select('#start').text() + ","
				+ d3.select('#end').text();
		var coordinates = "coordinates="
				+ mapviewportbounds.getSouthWest().lng() + ","
				+ mapviewportbounds.getSouthWest().lat() + ","
				+ mapviewportbounds.getNorthEast().lng() + ","
				+ mapviewportbounds.getNorthEast().lat();
		var hexmapcoordinates = "hexcoordinates=" + gethexmapdatafrombounds();
		var parameter = action + "&" + interval + "&" + coordinates + "&"
				+ hexmapcoordinates;
		mapresponsejson = getdatafromserver(sedeserviceendpoint, parameter);
		pointdata = mapresponsejson.pointdata;
		topwordsdata = mapresponsejson.topwords;
		for (i = 0; i < mapresponsejson.hexdata.length; i++) {
			hexmapdata[i].val = mapresponsejson.hexdata[i];
		}
		updatetopwordstable();
		mapresponsejson = null;
		datareceived = true;
	}

	function googlemapprojection(prj) {
		return function(lnglat) {
			ret = prj.fromLatLngToDivPixel(new google.maps.LatLng(lnglat[1],
					lnglat[0]))
			return [ ret.x, ret.y ];
		};
	}

	/*Get hexmapdatapoints*/
	function gethexmapdatafrombounds() {
		var boxdata = getboxinpixels(mapviewportbounds, false);
		hexbins = d3.hexbin().size([ boxdata[1], boxdata[2] ]).radius(15);
		var centers = hexbins.centers();
		var pointstring = "";
		for (var i = 0; i < centers.length; i++) {
			var point = new google.maps.Point(centers[i][0] + boxdata[0][0],
					centers[i][1] + boxdata[0][1]);
			var coordinate = projection.fromContainerPixelToLatLng(point);
			hexmapdata.push({
				"point" : coordinate,
				"val" : 0
			});
			pointstring += coordinate.lng() + "," + coordinate.lat() + ":";
		}
		return pointstring.substring(0, pointstring.length - 1);
	}

	/*Get box in coordinate pixel*/
	function getboxinpixels(bounds, isdiv) {
		var lowerleft = projection.fromLatLngToContainerPixel(bounds
				.getSouthWest());
		var upperright = projection.fromLatLngToContainerPixel(bounds
				.getNorthEast());
		if (isdiv) {
			lowerleft = projection.fromLatLngToDivPixel(bounds.getSouthWest());
			upperright = projection.fromLatLngToDivPixel(bounds.getNorthEast());
		}
		var top = [ lowerleft.x, upperright.y ];
		var width = upperright.x - lowerleft.x;
		var height = lowerleft.y - upperright.y;
		return [ top, width, height ];
	}
	/*Utility function to get current slider values*/
	function getcurrentslidervalues() {
		var sliderarr = slider.noUiSlider.get();
		sliderarr[0] = Math.floor(sliderarr[0]);
		sliderarr[1] = Math.floor(sliderarr[1]);
		return sliderarr;
	}
	/*Update slider texts*/
	function updateslidertexts() {
		var sliderarr = getcurrentslidervalues();
		var startdate = new Date(sliderstartend[0]);
		startdate.setTime(startdate.getTime() + sliderarr[0] * 86400000
				+ (startdate.getTimezoneOffset() * 60000));
		var enddate = new Date(sliderstartend[0]);
		enddate.setTime(enddate.getTime() + sliderarr[1] * 86400000
				+ (startdate.getTimezoneOffset() * 60000));
		d3.select("#start").html(moment(startdate).format('YYYY-MM-DD'));
		d3.select("#end").html(moment(enddate).format('YYYY-MM-DD'));
	}
	/*Set svg across overlay*/
	function setsvgforbounds() {
		var bounds = gmap.getBounds();
		var box = getboxinpixels(bounds, true);
		/*Set svg dimensions*/
		layer.attr("height", box[2] + "px").attr("width", box[1] + "px").style(
				"left", box[0][0] + "px").style("top", box[0][1] + "px");
	}
	/*To transform point data*/
	function transform(d) {
		d = new google.maps.LatLng(d.y, d.x);
		d = projection.fromLatLngToContainerPixel(d);
		return d3.select(this).attr("cx", d.x).attr("cy", d.y);
	}

	/*function to display maps based on user selected choice*/
	function displaymap() {
		var dispselected = d3.select('input[name="disp"]:checked').node().value;
		if (dispselected == "Point") {
			displaypoints();
		} else if (dispselected == "Hex") {
			displayhexmaps();
		} else {
			displaycounties();
		}
	}

	function isuserselectedid(id) {
		var idin = false;
		var keys = searchwordmap.keys();
		for (var i = 0; i < keys.length; i++) {
			var idlist = searchwordmap.get(keys[i]);
			for (var j = 0; j < idlist.length; j++) {
				if (idlist[j] == id) {
					idin = true;
					break;
				}
			}
			if (idin) {
				break;
			}
		}
		return idin;
	}
	/*Display point data*/
	function displaypoints() {
		if (pointdata.length != 0) {
			layer.selectAll("*").remove();
			//Display point data over here
			layer.selectAll("circle").data(pointdata).each(transform).enter()
					.append("circle").each(transform).attr("r", 3).style(
							"fill","red");
		}
	}
	/*Display hexmaps*/
	function displayhexmaps() {
		if (hexmapdata.length != 0) {
			layer.selectAll("*").remove();
			//Display hexmap data over here
			layer.append("g").attr("class", "hexagons").selectAll("path").data(
					hexmapdata).enter().append("path").attr("d", function(d) {
				return hexbins.hexagon();
			}).attr(
					"transform",
					function(d) {
						return "translate("
								+ projection
										.fromLatLngToContainerPixel(d.point).x
								+ ","
								+ projection
										.fromLatLngToContainerPixel(d.point).y
								+ ")";
					}).style("opacity", function(d) {
				return d.val;
			}).style("fill", function(d) {
				return "red";
			});
		}
	}
	/*Display countymaps only available for USA*/
	function displaycounties() {
		if (countiesdata.length != 0) {
			layer.selectAll("*").remove();
			prjct = googlemapprojection(projection);
			pathdat = d3.geo.path().projection(prjct);
			layer.append("g").attr("class", "county").selectAll("path").data(
					counties.features).enter().append("path").attr("class",
					"redfill").filter(function(d) {
				return d.properties.STATE == "06";
			}).attr("d", pathdat).style("opacity", 1);
			//Display county data over here
		}
		//Server call to get counties data 
		//Call again displaycounties
	}
	/*Initializes and setsup the home screen*/
	function initialize() {
		/*Set the map*/
		gmap = new google.maps.Map(d3.select("#map").node(), {
			zoom : 2,
			center : new google.maps.LatLng(35.7803, 16.7871),
			mapTypeId : google.maps.MapTypeId.ROADMAP
		});
		/*Set the overlayview for svg*/
		overlay = new google.maps.OverlayView();
		/*When overlay is added*/
		overlay.onAdd = function() {
			/*Create svg layer for drawing*/
			layer = d3.select(this.getPanes().overlayMouseTarget).append("svg");
			worldmapbounds = gmap.getBounds();
			mapviewportbounds = worldmapbounds;
		};
		/*When map is panned/zoomed/center changed*/
		overlay.draw = function() {
			projection = this.getProjection();
			//Check if we have data for drawing
			if (pointdata) {
				//set svg according to current bounds
				setsvgforbounds();
				layer.selectAll("*").remove();
				displaymap();
			}
		};
		/*Set overlay to map*/
		overlay.setMap(gmap);
		/*Set the time slider*/
		slider = document.getElementById('slider');
		/*Request time slider dates from database*/
		var sliderdata = getdatafromserver(sedeserviceendpoint,
				"action=getsliderdates");
		sliderstartend.push(sliderdata.startdate);
		sliderstartend.push(sliderdata.enddate);
		var selects=d3.select("#state").selectAll("option").data(usstates).enter().append("option").attr("value",function(d){
			return d.name;
		}).text(function(d){
			return d.name;
		});
		$("#start").val(moment(sliderdata.startdate).format('YYYY-MM-DD'));
		$("#start").prop('min',
				moment(sliderdata.startdate).format('YYYY-MM-DD'));
		$("#start").prop(
				'max',
				moment(sliderdata.enddate).subtract(1, 'days').format(
						'YYYY-MM-DD'));
		$("#end").val(
				moment(sliderdata.startdate).add(1, 'days')
						.format('YYYY-MM-DD'));
		$("#end").prop(
				'min',
				moment(sliderdata.startdate).add(1, 'days')
						.format('YYYY-MM-DD'));
		$("#end").prop('max', moment(sliderdata.enddate).format('YYYY-MM-DD'));
		sliderinterval = parseInt(sliderdata.days);
		noUiSlider.create(slider, {
			start : [ 0, 1 ],
			margin : 1,
			connect : true,
			range : {
				'min' : 0,
				'max' : sliderinterval
			}
		});
		slider.noUiSlider.on('end', function() {
			var slidervals = getcurrentslidervalues();
			$("#start").val(
					moment(sliderstartend[0]).add(slidervals[0], 'days')
							.format('YYYY-MM-DD'));
			$("#end").val(
					moment(sliderstartend[0]).add(slidervals[1], 'days')
							.format('YYYY-MM-DD'));
			$("#start").prop(
					'max',
					moment($("#end").val()).subtract(1, 'days').format(
							'YYYY-MM-DD'));
			$("#end").prop(
					'min',
					moment($("#start").val()).add(1, 'days').format(
							'YYYY-MM-DD'));
			//updateslidertexts();
			//reset();
			//getmapdata();
			//displaymap();
		});
		searchwordset = d3.set();
		//updateslidertexts();
		//refreshdata();
	}

	/*Get country and state detail as an array from dropdowns*/
	function getcountryandstate() {
		return [ d3.select("#country").node().value,
				d3.select("#state").node().value ];
	}

	function updatetopwordstable() {
		var howmany = parseInt(d3.select("#topwords").node().value);
		d3.select("#topwordstable").selectAll("tbody").remove();
		var rows = d3.select('#topwordstable').append("tbody").selectAll("tr")
				.data(topwordsdata).enter().append("tr").filter(function(d, i) {
					return i < howmany;
				});
		var wordcolumn = rows.append("td");
		var countcolumn = rows.append("td");
		wordcolumn.html(function(d) {
			return d.word;
		});
		countcolumn.html(function(d) {
			return d.count;
		});
	}

	function reset() {
		//searchwordmap = null;
		//searchwordmap = d3.map();
		//d3.select("#userselectedtable").selectAll("tbody").remove();
		hexmapdata = [];
		pointdata = [];
		//countiesdata = [];
		//datareceived = false;
	}

	function getcurrentidsasstring() {
		var ids = [];
		pointdata.forEach(function(d) {
			ids.push(d.id);
		});
		return ids.join();
	}

	function removeword(word) {
		searchwordset.remove(word);
		updateuserwordstable();
	}

	function updateuserwordstable() {
		d3.select("#userselectedtable").selectAll("tbody").remove();
		var rows = d3.select("#userselectedtable").append("tbody").selectAll(
				"tr").data(searchwordset.values()).enter().append("tr");
		var wordcolumn = rows.append("td");
		var removecolumn = rows.append("td");
		wordcolumn.html(function(d) {
			return d;
		});
		removecolumn.append("button").text("Remove").attr("onclick",
				function(d) {
					return "removeword(" + "\"" + d + "\"" + ")";
				});
	}

	function searchwords() {
		var wordsearched = d3.select("#wordsearch").node().value;
		if (wordsearched.length != 0 && !searchwordset.has(wordsearched)) {
			searchwordset.add(wordsearched);
			d3.select("#wordsearch").node().value = "";
			updateuserwordstable();
		}
	}

	function lowerdatechange() {
		$("#end").prop('min',
				moment($("#start").val()).add(1, 'days').format('YYYY-MM-DD'));
		if (moment($("#end").val()).isBefore(moment($("#start").val()))
				|| moment($("#end").val()).isSame(moment($("#start").val()))) {
			$("#end").val(
					moment($("#start").val()).add(1, 'days').format(
							'YYYY-MM-DD'));
		}
		var lowersliderval = moment.duration(
				moment($("#start").val()).diff(moment(sliderstartend[0])))
				.asDays();
		var uppersliderval = moment.duration(
				moment($("#end").val()).diff(moment(sliderstartend[0])))
				.asDays();
		slider.noUiSlider.set([ lowersliderval, uppersliderval ]);
	}

	function upperdatechange() {
		$("#start").prop(
				'max',
				moment($("#end").val()).subtract(1, 'days')
						.format('YYYY-MM-DD'));
		if (moment($("#start").val()).isAfter(moment($("#end").val()))
				|| moment($("#end").val()).isSame(moment($("#start").val()))) {
			$("#start").val(
					moment($("#end").val()).subtract(1, 'days').format(
							'YYYY-MM-DD'));
		}
		var lowersliderval = moment.duration(
				moment($("#start").val()).diff(moment(sliderstartend[0])))
				.asDays();
		var uppersliderval = moment.duration(
				moment($("#end").val()).diff(moment(sliderstartend[0])))
				.asDays();
		slider.noUiSlider.set([ lowersliderval, uppersliderval ]);
	}

	/*Get new data from database*/
	function refreshdata() {
		reset();
		var countryandstate = getcountryandstate();
		var searchquery = "";
		//display all countries
		if (countryandstate[0] == "ALL") {
			mapviewportbounds = worldmapbounds;
			gmap.fitBounds(worldmapbounds);
		}
		/*Display all states*/
		else if (countryandstate[1] == "ALL") {
			searchquery = countryandstate[0];
		}
		/*Display selected state*/
		else {
			searchquery = countryandstate[1] + "," + countryandstate[0];
		}
		if (searchquery.length != 0) {
			/*asynchronous*/
			geocoder.geocode({
				'address' : searchquery
			}, function(results, status) {
				if (status === google.maps.GeocoderStatus.OK) {
					mapviewportbounds = results[0].geometry.viewport;
					gmap.setCenter(results[0].geometry.location);
					gmap.fitBounds(results[0].geometry.viewport);
				}
			});
		}
	}

	function getplacedatafromgmap(searchkey) {
		if (searchkey.length == 0) {
			searchcoordinates = null;
			return;
		}
		geocoder.geocode({
			'address' : searchkey
		}, function(results, status) {
			if (status === google.maps.GeocoderStatus.OK) {
				searchcoordinates = [ results[0].geometry.location.lat(),
						results[0].geometry.location.lng() ];
				mapviewportbounds = results[0].geometry.viewport;
				gmap.setCenter(results[0].geometry.location);
				gmap.fitBounds(results[0].geometry.viewport);
			} else {
				searchcoordinates = null;
			}
		});
	}

	function searchplace() {
		var searchkey = $("#location").val();
		getplacedatafromgmap(searchkey);
	}

	function changestate() {
		var searchkey = $("#state").val();
		getplacedatafromgmap(searchkey);
	}
	function update() {
        reset();
		var spatialchoice = $('input[name=spatialradio]:checked').val();
		var spatialdata = {};
		spatialdata.type = parseInt(spatialchoice);
		if (spatialdata.type == 2) {
			spatialdata.state = $("#state").val();
		}
		if (spatialdata.type == 3) {
			if ($("#location").val().length != 0)
				spatialdata.coordinates = searchcoordinates;
			if ($("#buffer").val().length != 0
					&& (!isNaN(parseFloat($("#buffer").val())) && isFinite($(
							"#buffer").val())))
				spatialdata.radius = $("#buffer").val();
		}
		var temporaldata = {};
		temporaldata.from = $("#start").val();
		temporaldata.end = $("#end").val();
		var textualdata = {};
		textualdata.words = searchwordset.values();
		var hexmapcenters = {};
		hexmapcenters.coordinates = gethexmapdatafrombounds();
		console.log(hexmapcenters);
		var jsondata = {};
		jsondata.spatialdata = spatialdata;
		jsondata.temporaldata = temporaldata;
		jsondata.textualdata = textualdata;
		jsondata.hexmapcenters = hexmapcenters;
		var request = "action=getmapdata&jsondata=" + JSON.stringify(jsondata);
		mapresponsejson = getdatafromserver(sedeserviceendpoint, request);
		pointdata = mapresponsejson.pointdata;
		topwordsdata = mapresponsejson.topwords;
		for (i = 0; i < mapresponsejson.hexdata.length; i++) {
			hexmapdata[i].val = mapresponsejson.hexdata[i];
		}
		sqlquery=mapresponsejson.sqlquery;
		updatetopwordstable();
		mapresponsejson = null;
		setsvgforbounds();
		layer.selectAll("*").remove();
		displaymap();
	}
	function spatialselectchange() {
		$("#location").val("");
		$("#buffer").val("");
		var spatialchoice = $('input[name=spatialradio]:checked').val();
		if (spatialchoice == "1") {
			$("#state").prop("disabled", true);
			$("#location").prop("disabled", true);
			$("#buffer").prop("disabled", true);
			$("#state").val("default");
			mapviewportbounds = worldmapbounds;
			gmap.fitBounds(worldmapbounds);
		}
		if (spatialchoice == "2") {
			$("#state").prop("disabled", false);
			$("#location").prop("disabled", true);
			$("#buffer").prop("disabled", true);
		}
		if (spatialchoice == "3") {
			$("#state").prop("disabled", true);
			$("#location").prop("disabled", false);
			$("#buffer").prop("disabled", false);
			$("#state").val("default");
			mapviewportbounds = worldmapbounds;
			gmap.fitBounds(worldmapbounds);
		}
	}
	function gotosurvey(){		
		if(pointdata.length != 0){
			document.addsurvey.emailsurvey.value="jajayaku@kent.edu";
			document.addsurvey.sqlquerysurvey.value=sqlquery;
			var spatialchoice = $('input[name=spatialradio]:checked').val();			
			if(spatialchoice=="1"){
				document.addsurvey.spatialdat.value="All Tweets";
			}
			if(spatialchoice=="2"){
				document.addsurvey.spatialdat.value=$("#state").val();
			}
			if(spatialchoice=="3"){
				document.addsurvey.spatialdat.value="Place= "+$("#location").val()+" and buffer= "+$("#buffer").val();
			}
			document.addsurvey.temporaldat.value="Between "+moment($("#start").val()).format("MM/DD/YYYY")+" and "+moment($("#end").val()).format("MM/DD/YYYY");
			if(searchwordset.empty()){
				document.addsurvey.textualdat.value="None";
			}
			else{
				document.addsurvey.textualdat.value=searchwordset.values().toString();
			}
			document.addsurvey.tweetcount.value=pointdata.length;
			return true;
		}
		return false;
	}
</script>
</head>

<body onload="initialize()">
	<!-- Navigation bar -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbar" aria-expanded="false"
					aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">SEDE - Socio-Environmental Data
					Explorer</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#">Settings</a></li>
					<li><a href="#">About</a></li>
					<li><a href="#">Help</a></li>
				</ul>
				<form class="navbar-form navbar-right">
					<input type="text" class="form-control" placeholder="Search...">
				</form>
			</div>
		</div>
	</nav>
	<div class="container-fluid fill">
		<div class="row fill">
			<div class="col-md-8 main fill" id="map"></div>
			<div class="col-md-4 col-md-offset-8 controls sidebar">
				<div class="row">
					<div class="col-md-12">
						<h3>Spatial Filter</h3>
						<div class="row">
							<div class="col-md-3">
								<label><input type="radio" name="spatialradio"
									checked="checked" value="1" onclick="spatialselectchange()">
									All Tweets</label>
							</div>
						</div>
						<br>
						<div class="row">
							<div class="col-md-3">
								<label><input type="radio" name="spatialradio" value="2"
									onclick="spatialselectchange()"> US States</label>
							</div>
							<div class="col-md-6">
								<select class="form-control" id="state" disabled="disabled"
									onchange="changestate()">
									<option value="default" disabled selected>Select State</option>									
								</select>
							</div>
						</div>
						<br />
						<div class="row">
							<div class="col-md-1">
								<input type="radio" name="spatialradio" value="3"
									onclick="spatialselectchange()">
							</div>
							<div class="col-md-2">Location:</div>
							<div class="col-md-4">
								<input type="text" class="form-control" id="location"
									disabled="disabled" onblur="searchplace()">
							</div>
							<div class="col-md-3">Buffer(miles):</div>
							<div class="col-md-2">
								<input type="text" class="form-control" id="buffer"
									disabled="disabled" value="1">
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<h3>Temporal Filter</h3>
						<div class="row">
							<div class="col-md-12">
								<div id="slider"></div>
							</div>
						</div>
						<br>
						<div class="row">
							<div class="col-md-6">
								<input type="date" id="start" min="2015-05-11" max="2016-05-20"
									onchange="lowerdatechange()">
							</div>
							<div class="col-md-6">
								<input type="date" id="end" min="2015-05-11" max="2016-05-20"
									onchange="upperdatechange()">
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<h3>Textual Filter</h3>
						<div class="row">
							<div class="col-md-12">
								<div class="row">
									<div class="col-md-2">Top</div>
									<div class="col-md-3">
										<select class="form-control" id="topwords"
											onchange="updatetopwordstable()">
											<option value="5" selected="selected">5</option>
											<option value="10">10</option>
											<option value="15">15</option>
										</select>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-6 col-md-offset-2">
								<table class="table table-striped" id="topwordstable">
									<thead>
										<tr>
											<th>Word</th>
											<th>Count</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="row">
									<div class="col-md-6">
										<input type="text" class="form-control" id="wordsearch">
									</div>
									<div class="col-md-6">
										<button type="button" class="btn btn-primary"
											onclick="searchwords()">Add Word</button>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-6 col-md-offset-2">
								<table class="table table-striped" id="userselectedtable">
									<thead>
										<tr>
											<th>Word</th>
											<th>Remove</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-md-12">
						<h3>Display Options</h3>
						<div class="row">
							<div class="col-md-12">
								<label class="radio-inline"><input type="radio"
									name="disp" value="Point" checked="checked"
									onclick="displaypoints()">Points</label> <label
									class="radio-inline"><input type="radio" name="disp"
									value="Hex" onclick="displayhexmaps()">HexMap</label> <label
									class="radio-inline"><!-- <input type="radio" name="disp"
									value="County" onclick="displaycounties()">Counties</label> -->
							</div>
						</div>
					</div>
				</div>
				<br>
				<div class="row">
					<div class="col-md-6">
						<form action="survey_tables.jsp" name="addsurvey" onsubmit="return gotosurvey()" method="post">
						    <input type="hidden" name="emailsurvey" id="emailsurveyid" value="">
						    <input type="hidden" name="sqlquerysurvey" id ="sqlquerysurveyid" value="">
						    <input type="hidden" name="spatialdat" id ="spatialdatid" value="">
						    <input type="hidden" name="temporaldat" id ="temporaldatid" value="">
						    <input type="hidden" name="textualdat" id ="textualdatid" value="">
						    <input type="hidden" name="tweetcount" id ="tweetdatid" value="">
							<input type="submit" class="btn btn-primary" value="Create Code Book">
						</form>
					</div>
					<div class="col-md-6">
						<button type="button" class="btn btn-primary" onclick="update()">Update</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>

